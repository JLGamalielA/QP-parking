(()=>{var e=function(e,t){return!isNaN(e)&&!isNaN(t)&&(e>=-90&&e<=90&&t>=-180&&t<=180)},t=function(e,t){var n=document.getElementById("latitude"),a=document.getElementById("longitude");if(n&&a){var i=parseFloat(n.value),o=parseFloat(a.value);(isNaN(i)||Math.abs(i-e)>1e-6)&&(n.value=Number(e).toFixed(7),n.classList.remove("is-invalid")),(isNaN(o)||Math.abs(o-t)>1e-6)&&(a.value=Number(t).toFixed(7),a.classList.remove("is-invalid"))}};window.initParkingMap=function(){var n,a,i=document.getElementById("map");if(i&&!i.dataset.bound){i.dataset.bound="true";var o=L.map("map").setView([19.432607,-99.133209],12);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(o),setTimeout(function(){o.invalidateSize()},250);var l=null,d=function(n,a){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e(n,a)&&(o.setView([n,a],15),l?l.setLatLng([n,a]):(l=L.marker([n,a],{draggable:!0}).addTo(o)).on("moveend",function(e){var n=e.target.getLatLng(),a=n.lat,i=n.lng;t(a,i)}),i&&t(n,a))},r=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t=e.coords,n=t.latitude,a=t.longitude;d(n,a,!0)},function(e){return console.warn("Geolocation error or denied:",e.message)},{enableHighAccuracy:!0}):console.warn("Geolocation not supported.")},u=function(){var t=document.getElementById("latitude"),n=document.getElementById("longitude"),a=parseFloat(t.value),i=parseFloat(n.value);e(a,i)?(d(a,i,!1),t.classList.remove("is-invalid"),n.classList.remove("is-invalid")):(isNaN(a)&&t.classList.add("is-invalid"),isNaN(i)&&n.classList.add("is-invalid"))},s=parseFloat(null===(n=document.getElementById("latitude"))||void 0===n?void 0:n.value),c=parseFloat(null===(a=document.getElementById("longitude"))||void 0===a?void 0:a.value);e(s,c)?d(s,c,!1):r(),o.on("click",function(e){d(e.latlng.lat,e.latlng.lng,!0)});var v=document.getElementById("btn-current-location");v&&v.addEventListener("click",function(e){e.preventDefault(),r()});var g=document.getElementById("latitude"),m=document.getElementById("longitude");g&&m&&(g.addEventListener("input",u),m.addEventListener("input",u))}}})();